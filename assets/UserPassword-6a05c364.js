import{q as i,s as g,t as v,o as k,a as b,w as r,x as a,z as p,b_ as h,E}from"./index-73de4702.js";import{E as V,a as y}from"./el-form-item-396586e3.js";import{E as x}from"./_plugin-vue_export-helper-a88ebb22.js";import{E as U}from"./el-input-c204ea9e.js";import{P as S}from"./PageContainer-5c903ffc.js";import"./el-message-dac1224c.js";const D={__name:"UserPassword",setup(q){const e=i({oldPass:"",newPass:"",checkPass:""}),u=i(),c={oldPass:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPass:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:15,message:"新密码长度必须在6-15个字符之间",trigger:"blur"},{validator:(d,s,o)=>{s===e.value.oldPass?o(new Error("新密码不能与原密码相同")):o()},trigger:"blur"}],checkPass:[{required:!0,message:"确认密码不得为空",trigger:"blur"},{validator:(d,s,o)=>{s!==e.value.newPass?o(new Error("确认密码必须和新密码一样")):o()},trigger:"blur"}]},n=g(),f=v(),w=async()=>{await u.value.validate(),await h(e.value),E.success("修改密码成功"),n.setToken(""),n.clearUserInfo(),f.push("/login")},_=()=>{u.value.resetFields()};return(d,s)=>{const o=U,t=V,m=x,P=y;return k(),b(S,{title:"重置密码"},{default:r(()=>[a(P,{rules:c,model:e.value,"label-width":"100px","label-position":"right",style:{width:"50%"},ref_key:"formRef",ref:u},{default:r(()=>[a(t,{label:"原密码",prop:"oldPass"},{default:r(()=>[a(o,{modelValue:e.value.oldPass,"onUpdate:modelValue":s[0]||(s[0]=l=>e.value.oldPass=l),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),a(t,{label:"新密码",prop:"newPass"},{default:r(()=>[a(o,{modelValue:e.value.newPass,"onUpdate:modelValue":s[1]||(s[1]=l=>e.value.newPass=l),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),a(t,{label:"确认新密码",prop:"checkPass"},{default:r(()=>[a(o,{type:"password","show-password":"",modelValue:e.value.checkPass,"onUpdate:modelValue":s[2]||(s[2]=l=>e.value.checkPass=l)},null,8,["modelValue"])]),_:1}),a(t,null,{default:r(()=>[a(m,{type:"primary",size:"large",onClick:w},{default:r(()=>[p("修改密码")]),_:1}),a(m,{size:"large",onClick:_},{default:r(()=>[p("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}};export{D as default};
